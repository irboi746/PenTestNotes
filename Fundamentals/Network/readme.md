# Table of Content

# DNS 101
## What is DNS ?
* DNS (Domain Name System) is a distributed database arranged hierarchically with the purpose of providing an abtraction between Internet Services(WebApp, Email etc.) and IP Address.
* Thereby permitting : 
   * the use of names which are easier to remember instead of numbers to identify hosts(servers) 
   * the change of server IP address without the need to broadcast its IP address again by simply pointing the domain name to the new IP address. 
   * load balancing, where one name can refer to multiple hosts.

## DNS Resource Record
Reference : https://datatracker.ietf.org/doc/html/rfc1035#page-12
 
+--+--+--+--+--+--+--+--+--+--+--+--+ \
|NAME|TYPE|CLASS|TTL|RDLENGTH|RDATA| \
+--+--+--+--+--+--+--+--+--+--+--+--+ 
* NAME : usually a fully qualified domain name. If anything other than domain name is used, the name of the zone the record is in is used and it will be automatically appended to the end of the name.
* TYPE : containing one of the RR TYPE codes. 

| TYPE | Values and Meaning |
|------|--------------------|
|A|host IP address|
|NS|an authoritative name server|
|SOA| marks the start of a zone of authority|
|CNAME|the canonical name for an alias|
|MX|mail exchange|
|PTR|Domain Name Pointer|

* CLASS : INternet, CHaos, HeSiod
* TTL :  Time-To-Live (in seconds), defaults to minimum value determined in SOA record.
* RDLENGTH : specifies the length in the RDATA field.
* RDATA :  a variable length string of octets that describes the resource. The format of this information varies according to the TYPE and CLASS of the resource record.

# NetBIOS 101
* The main purpose of NetBIOS is to allow applications on different systems to communicate with one another over LAN.
* NetBIOS can either communicate using TCP or UDP and uses these ports **137 name service (UDP)**, **138 datagram service (UDP)** and **139 session service (TCP)**
* Documentation for NetBIOS (here)[https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc738412(v=ws.10)?redirectedfrom=MSDN]
* netBIOS suffix \
![image](https://user-images.githubusercontent.com/88809233/146520033-ec1eee18-0bc5-4c52-a982-c4149fbc1ee3.png)

## 137 name service (UDP ): 
* translates and maps NetBIOS names to an IP address of an NetBIOS resource(similar to DNS). 
* It is a 16 byte addresss dynamically registered when a service or application starts. 
* `Name Query` is used to resolve NetBIOS name to an IP address.
* More on name [here](https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-brws/0c773bdd-78e2-4d8b-8b3d-b7506849847b?redirectedfrom=MSDN)
* Service that actually maps NetBIOS names to IP is Windows Internet Name Service (WINS). More information on WINS (here)[https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc725802(v=ws.11)?redirectedfrom=MSDN]
 ## 138 Datagram service (UDP): 
* permits the sending of messages to a NetBIOS name.
* allows the sending and receiving of the datagram messages to and from a specific NetBIOS name or broadcast the datagram to all NetBIOS names.
* allows one computer to communicate with many other computers but are limited by message size and lack of error detection.
## 139 Session Service
* it allows two names to establicsh a session to exchange data. 
* e.g in a file share, When a device creates a file sharing connection with the server, the sesssion service is used and once the session is established, the SMB protocol is used to exchange data.
* 4 Step Session Establishment : 
      1. NetBIOS name resolved to IP address
      2. TCP connection is established between 2 devices over port 139
      3. Device that started the connection sends a NetBIOS Session Request(NetBIOS name of application that wants to establish the connection and NetBIOS name to which to connect to) through the TCP connection 
      4. If remote device is listening on that name, there will be a positive response and session is established. 
 
# SMB 101
* Server Message Block (SMB) is a protocol that provides shared access to files and printers between nodes on a network.
* Before Windows 2000 SMB ran only with NetBIOS over port 139
* Windows 2000 and above allows SMB to directly run over TCP/IP wihtout the need to ride on NetBIOS session and port 445 is used.
