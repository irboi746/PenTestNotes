# WebApp Recon
## Passive Recon
* The first step of Web information Gathering usually starts from electronic footprint of the target's websites, network and employees. As we know, these information can be gathered using passive recon methods.

### Tools of the trade : 
   1. WHOIS
      * used to look up domain ownership details from different databases
      * can be CLI or web-based (whois.domaintools.com)
      * typically runs on TCP port 43
      
      |Yield| | |
      |-----|-|-|
      |IP Address|admin contact info|technical contact info|
       
   2. NSLOOKUP (DNS ENUMERATION) 
      * DNS can be queried for IP addresses that we gathered from WHOIS database.
      * Remember RR types :
      
       | TYPE | Values and Meaning |
       |------|--------------------|
       |A|host IP address|
       |NS|an authoritative name server|
       |SOA| marks the start of a zone of authority|
       |CNAME|the canonical name for an alias|
       |MX|mail exchange|
       |PTR|Domain Name Pointer|
      
      * Command to run : `nslookup -querytype=ANY <domain name>`
      * The above command will run a nslookup on any of the RR Types listed in the table above.
      * nslookup might reveal more IP addresses, where there will be a need to recursively query the IP address with WHOIS to find out more information about the target.  
      
      |Yield| | |
      |-----|-|-|
      |IP Address|Netblock|owner of netblock(recursive whois query)|
      
   3. Netcraft (www.netcraft.com)
      * One Stop Recursive DNS and WHOIS Enumeration 
      
      |Yield| | |
      |-----|-|-|
      |IP Address of domain|Netblock|owner of netblock(recursive whois query)|
      
* **Aim of recursive WHOIS and NSLOOKUP is to uncover all IP addresses related to the domain or subdomain of the target.**
4. OSINT
      * Linkedin
      * Job Postings
      * Partners & Third Parties 
5. Google Hacking
   * Means to use Google's sophisticated search operators to uncover misconfigured web servers, sensitive informaiton left on a server, password files, etc.
   * [Google Hacking DB](https://www.exploit-db.com/google-hacking-database) contains a list of searches for many purposes.
6. Shodan
   * Another search engine that scans the entire internet and interrogates ports in order to gather information from banners.
   
## Active Recon
* At this stage, we will be mounting scans and commands directly to the server and making our recon more visible.
* Typically, subdomain enumeration and webserver fingerprinting will give us an overview of the infrastructure as a whole.

### Subdomain Enumeration
* mapping of all available subdomains within a domain name to widen attack surface and sometimes reveal hidden management panels or intranet web applications.

#### Tools of the Trade : 
1. subbrute
2. dnsrecon
3. NSLOOKUP (zone transfer)

##### Web Tools : 
1. Netcraft
2. Google

### Fingerprint Webserver, Frameworks and Applications
* WebServer Fingerprinting can be useful not just for WebApp attack but also for attacking the OS (vulnerabilities based on OS version) hence information here might have overlap with OS attacks.
* ISAPI Extensions (a component of IIS) and web application firewall can affect the results of fingerprinting.
   * An example of such ISAPI Extensions/htaccess/mod_rewrite rules are SEF(Search Engine Friendly) URLs where URL such as `www.example.com/read.php?id=10` is transformed into `www.example.com/read/example.html` 
   * Only URL parameter attacks are affected;forms, cookies and header attacks are still possible.
* Fingerprinting Frameworks and Applications 
#### Tools of the Trade : 
1. netcat
   * netcat is a networking utility for reading and writing to TCP or UDP network connections. 
   * We can make use of netcat to investigate the HTTP **RESPONSE** by sending a request 
   * Commands to use : 
   ```
   nc <ip address> <port>
   HEAD / HTTP/1.0
   ```
   * Typical Response
   ![nc1](https://github.com/irboi746/PenTestNotes/blob/main/1.%20Reconnaissance/WebApp/Resources/netcat1.JPG)
   ![nc2](https://github.com/irboi746/PenTestNotes/blob/main/1.%20Reconnaissance/WebApp/Resources/netcat2.JPG)
   * Obfuscated Response
   ![nc3](https://github.com/irboi746/PenTestNotes/blob/main/1.%20Reconnaissance/WebApp/Resources/netcat3.JPG)
   * [Testing for Web Application Fingerprint (OWASP-IG-004)](https://wiki.owasp.org/index.php/Testing_for_Web_Application_Fingerprint_(OWASP-IG-004)#Protocol_behaviour) also entails the other indicators to identify OS version and server technology like ***HTTP Header Field Order***, ***Malformed Request Test***.
   
   |Yield| |
   |-----|-|
   |Server OS|Serer Technology|

2. Web cookies
   * Web cookies can also be sources of information that reveal the server technology used
   * Each technology has their own default cookie names and it is usually left as default.
   
   |Server|Cookie|
   |------|------|
   |PHP|PHPSESSID=xxx|
   |.NET|ASPSSESSIONIDYYYY=XXXX|
   |JAVA|JSESSION=XXXX|

3. whatweb
   * a commandline tool that is available in Kali. 
   * Command used `whatweb <URL/IP ADDRESS> -v`
   * -v option helps format the information to be more readable
   ![whatweb](https://github.com/irboi746/PenTestNotes/blob/main/1.%20Reconnaissance/WebApp/Resources/whatweb.png)
4. wappalyzer
   * it is a **firefox** / **chrome** browser plugin that reveals the technologies used by the web application.
   ![wapplyzer](https://github.com/irboi746/PenTestNotes/blob/main/1.%20Reconnaissance/WebApp/Resources/wapplyzer.JPG)

5. Burp Suite

##### Web Tools : 
1. Netcraft 
   * not useful if webapp is an internal server or there might be times where netcraft is unable to get the required information.

   |Yield| | |
   |-----|-|-|
   |Web Server Version|IP addresses|Nameservers|
   |Uptime Stats|IP Address Owner|Host Provider|



###  Enumerating Resources

#### Tools of the Trade : 
1. Burp Suite
   * Used to crawl the website
2. DirBuster
   * used to enumerate directories and files using a dictionary or brute force regex

### Information Disclosure through Misconfiguration
#### Tools of the Trade
1. Putty / Netcat


