# Active Directory Enumeration
* There are two main attack flow for attacking Active Directory after a successful client side attack.
   1. Compromise a member of the Domain Admin to gain complete control of every single computer in the domain
   2. Compromise Domain Controller when we can then modify all domain-joined computers or execute applications on them.
* Therefore there are 4 information that needs to be enumerated for the above attack flow to be achieved
   1. Enumerate Domain Users and learn as much as we can about their group memberships
  
   2. Unravel Nested Groups
      
   3. Find Logged in Users who are in High Value Targets(HVT) Group 
      * HVTs can be domain admin, or "potential avenues of chained compromise" which will lead to domain admin.
      * As credentials will be cached in memory, it is possible to steal credentials from these logged in HVT and authenticate with the stolen credentials
      
   4. Enumerate SPN (Service Principal Names)
      * when application like Exchange, SQL and IIS are integrated into AD, a unique service instance identifier (SPN) is created
      * enumerating all registered SPN will allow us to find out the IP address and port number of applications running on the servers integrated with AD.

## Traditional Approach
* Traditionally, "net.exe" is used to do AD enumeration.
* It currently is still valuable to enumerating AD but there is a more scriptable and modern approach.

## Modern Approach
* Currently, powershell is used to create modular and flexible scripts to help enumerate active directory.
* Scripts are included in this folder.

## Powerview
* Upload powerview.ps1 onto victim machine
```
# on cmd.exe
poweershell
. .\powerview.ps1

<run any powerview invocation>
```
### References: 
* https://nored0x.github.io/red-teaming/active-directory-domain-enumeration-part-1/
* https://nored0x.github.io/red-teaming/active-directory-domain-enumeration-part-2/
* https://nored0x.github.io/red-teaming/active-directory-domain-enumeration-part-3/
